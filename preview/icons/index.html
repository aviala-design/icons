<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Aviala Design Icons</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <style>
        @font-face {
            font-family: 'default-ltalic';
            src: url(../src/JetBrainsMono-Italic.ttf);
        }

        @font-face {
            font-family: 'default';
            src: url(../src/JetBrainsMono-Medium.ttf);
        }

        @font-face {
            font-family: 'default-semibold-ltalic';
            src: url(../src/JetBrainsMono-SemiBoldItalic.ttf);
        }

        .icon-grid {
            display: flex;
            padding: 14px;
            flex-direction: column;
            align-items: flex-start;
            margin-top: -12px;
            /* width: calc(1065px - 28px); */
            width: calc(956px - 28px);
            position: relative;
        }

        .icon-card {
            border-top: 1px solid #eee;
            padding: 8px 14px;
            /* border-radius: 8px; */
            text-align: center;
            display: flex;
            flex-direction: row;
            align-items: center;
            /* width: calc(1065px - 56px); */
            width: calc(956px - 56px);
        }

        .icon-display {
            flex-direction: row;
            justify-content: flex-start;
            display: flex;
            width: 100%;
        }

        .icon-display div {
            max-width: calc(108px - 12px);
            min-width: calc(108px - 12px);
            padding: 0 6px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 38px;
            border-left: 1px solid #eee;
            text-align: center;
            gap: 10px;
        }

        .icon-display .colorful-variant {
            position: relative;
        }

        .icon-display .colorful-variant::after {
            content: attr(data-variant);
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 10px;
            color: #999;
            font-family: 'default';
        }

        .icon-name {
            font-size: 14px;
            color: #333;
            min-width: 248px;
            text-align: left;
            font-family: 'default-ltalic';
        }

        aviala-icon {
            font-size: 24px;
        }

        .mode-label {
            font-size: 12px;
            color: #666;
            font-family: 'default';
        }

        .icon-title {
            /* width: calc(1065px - 56px); */
            width: calc(956px - 56px);
            display: flex;
            flex-direction: row;
            align-items: center;
            padding: 22px 28px 6px 28px;
            background: #ffffff;
            position: sticky;
            top: -1px;
            z-index: 10;
            border-bottom: 1px solid rgba(203, 203, 203, 0);
            transition: all 0.4s ease-in;
        }

        .icon-title .icon-name {
            font-family: 'default-semibold-ltalic';
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .page-title {
            padding: 22px 28px 6px 28px;
            top: 0;
            width: calc(956px - (28px * 2));
            max-width: calc(100vw - (28px * 2) - 16px);
        }

        h4 {
            font-family: 'default';
            font-size: 14px;
            font-weight: normal;
            opacity: 0.7;
            margin: 0;
            text-align: center;
        }

        h2 {
            font-family: 'default-ltalic';
            text-align: center;
            font-weight: normal;
            font-size: 26px;
            display: flex;
            flex-direction: row;
            align-items: flex-end;
            justify-content: center;
        }

        p {
            font-family: 'default';
            font-size: 12px;
            text-align: center;
            opacity: 0.4;
            margin: 0;
        }

        @media screen and (max-width: 960px) {
            #getStarted {
                min-width: calc(100vw - 96px);
            }

            .category-header {
                width: calc(100vw - 52px);
                left: 14px;
            }

            body {
                align-items: start !important;
            }
        }

        html {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 16px;
            user-select: none;
            padding-bottom: 196px;
        }

        .page-title {
            flex-shrink: 0;
            width: calc(956px - (28px * 2));
            max-width: calc(100vw - (28px * 2) - 16px);
        }

        .x-scroll {
            max-width: calc(100vw - 16px);
            overflow-x: auto;
        }

        .icon-title {
            position: sticky;
            top: 0;
            background: #fff;
            z-index: 10;
        }

        .category-section {
            width: 100%;
            margin-bottom: 8px;
            position: relative;
        }

        .category-header {
            position: sticky;
            top: 72px;
            background: #fff;
            z-index: 9;
            margin: 0 -1px;
            padding: 8px 10px 8px 14px;
            cursor: pointer;
            border-radius: 6px;
            list-style: none;
            transition: all 0.3s ease;
            box-shadow: 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(0, 0, 0, 0);
            border: 1px solid rgba(203, 203, 203, 0);
        }

        .category-header:hover {
            background: #f5f5f5;
        }

        .category-header::-webkit-details-marker {
            display: none;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .title-with-icon {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .arrow-icon {
            font-size: 16px;
            color: #666;
            transition: all 0.25s ease;
        }

        .icon-count {
            font-family: 'default';
            font-size: 13px;
            color: #666;
            padding: 2px 6px;
            /* border: solid 1px #999; */
            border-radius: 20px;
            min-width: 16px;
            text-align: right;
            /* text-align: center; */
            transition: all 0.15s ease 0.05s;
        }

        /* 移除之前的箭头样式 */
        .category-header::after {
            display: none;
        }

        .category-header h3 {
            margin: 0;
            font-family: 'default';
            font-size: 16px;
            font-weight: normal;
            color: #333;
            transition: all 0.15s ease 0.05s;
        }

        .category-icons {
            padding: 8px 0;
        }

        .total-count {
            padding: 16px 20px;
            font-family: 'default';
            font-size: 14px;
            color: #666;
            border-bottom: 1px solid #eee;
            margin-bottom: 16px;
        }

        /* 为分类标题添加图标数量样式 */
        .category-header h3 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: normal;
            font-size: 14px;
        }

        button {
            appearance: none;
            background: #f5f5f500;
            border: none;
            font-family: 'default-semibold-ltalic';
            color: #1764ff;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 3px;
            padding: 4px 5px 4px 9px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #f5f5f5;
            gap: 6px;
            padding: 4px 2px 4px 9px;
            cursor: pointer;
        }

        button aviala-icon {
            font-size: 16px;
            transform: translateY(-0.3px);
        }

        /* pre {
            background: #eee;
            padding: 8px 10px 8px 14px;
            cursor: pointer;
            border-radius: 6px;
            list-style: none;
            transition: all 0.3s ease;
            font-family: 'default';
        } */

        code {
            font-family: 'default-ltalic';
            font-size: 14px;
            background: #eee;
            padding: 8px 10px 8px 14px;
            border-radius: 6px;
            list-style: none;
            transition: all 0.3s ease;
            user-select: all;
        }

        /* 复制提示样式 */
        .copy-toast {
            position: fixed;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            font-family: 'default';
            z-index: 1000;
            opacity: 0;
            transform: translateX(-50%) translateY(10px);
            transition: opacity 0.3s, transform 0.3s;
            pointer-events: none;
        }

        .copy-toast.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* 点击反馈效果 */
        aviala-icon.copied {
            animation: pulse 0.3s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* 鼠标悬停效果 */
        aviala-icon {
            transition: transform 0.2s ease;
        }

        aviala-icon:hover {
            transform: scale(1.1);
        }

        .documentContent {
            font-family: 'default';
            font-size: 14px;
            color: #333;
            line-height: 1.5;
            margin-bottom: 16px;
            padding: 8px 10px 8px 14px;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: -1;

            h2,
            h4 {
                text-align: start !important;
                justify-content: flex-start;
            }

            h2 {
                margin: 6px 0px;
                border-bottom: dashed 1px #eee;
            }

            h4 {
                margin: 6px 0px;
            }
        }

        .x-scroll {
            max-width: calc(100vw - 16px);
            overflow-x: auto;
            position: relative;
        }

        .parameter-table {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 8px;

            code {
                min-width: 42px;
                padding: 6px 10px !important;
                text-align: center;
            }
        }

        button.aviala-home-btn {
            padding: 8px;
            margin-left: -9px;
            border-radius: 50%;
        }
    </style>
</head>

<body>
    <!-- <div class="x-scroll"> -->
    <div class="icon-title">
        <div class="icon-name" id="icon-list-title"></div>
        <div class="icon-display">
            <div class="mode-label">outline</div>
            <div class="mode-label">fill</div>
            <div class="mode-label">colorful</div>
            <!-- <div class="mode-label">colorful variants</div> -->
            <div class="mode-label">black</div>
            <div class="mode-label">fill-black</div>
            <div class="mode-label">fill-colorful</div>
        </div>
    </div>
    <div class="icon-grid" id="iconGrid"></div>
    <!-- </div> -->
    <script type="module" src="./dist/all.js"></script>
    <script type="module">
        import { allIcons, getIcon } from './dist/all.js';

        function initializeDemo() {
            // Replace listAvialaIcons(false) with direct usage of allIcons
            const iconInfo = {
                icons: Object.entries(allIcons).map(([name, data]) => ({
                    name,
                    modes: Object.keys(data)
                }))
            };

            const grid = document.getElementById('iconGrid');

            const categorizedIcons = {};
            let totalIcons = 0;
            iconInfo.icons.forEach(icon => {
                const [category, iconName] = icon.name.split('_');
                if (!categorizedIcons[category]) {
                    categorizedIcons[category] = [];
                }
                categorizedIcons[category].push({ ...icon, displayName: iconName });
                totalIcons++;
            });

            const totalCount = document.querySelector('#icon-list-title');
            // const pageOrigin = window.location.origin;
            // totalCount.innerHTML = `<button class="aviala-home-btn" onclick="window.location.href = '${pageOrigin}/'"><aviala-icon name="Generic_home" mode="outline" style="font-size: 18px"></aviala-icon></button> total of ${totalIcons}`;
            totalCount.innerHTML = `total of ${totalIcons}`;

            Object.entries(categorizedIcons).forEach(([category, icons]) => {
                const details = document.createElement('details');
                details.className = 'category-section';
                details.open = false;

                const summary = document.createElement('summary');
                summary.className = 'category-header';

                // 创建新的标题布局
                summary.innerHTML = `
                    <div class="header-content">
                        <div class="title-with-icon">
                            <aviala-icon name="Direction_arrowDownLight" class="arrow-icon"></aviala-icon>
                            <h3>${category}</h3>
                        </div>
                        <div class="icon-count">${icons.length}</div>
                    </div>
                `;

                // 监听折叠状态变化
                details.addEventListener('toggle', () => {
                    const arrowIcon = summary.querySelector('.arrow-icon');
                    const h3Content = summary.querySelector('h3');
                    const iconCount = summary.querySelector('.icon-count');
                    if (details.open) {
                        arrowIcon.style.transform = 'rotate(180deg)';
                        arrowIcon.setAttribute('color', '#FA9E14');  // 使用color属性设置颜色
                        // iconCount.style.color = '#FFD699 !important';  // 设置iconCount的样式
                        // h3Content.style.color = '#FA9E14 !important';  // 设置headerContent的样式
                        h3Content.setAttribute('style', 'color: #FA9E14 !important');
                        iconCount.setAttribute('style', 'color: #FFD699 !important');
                    } else {
                        arrowIcon.style.transform = 'rotate(0deg)';
                        arrowIcon.removeAttribute('color');  // 移除color属性恢复默认颜色
                        h3Content.removeAttribute('style');  // 移除color属性恢复默认颜色
                        iconCount.removeAttribute('style');  // 移除color属性恢复默认颜色
                        // h3Content.style.color = '#333';  // 设置headerContent的样式
                        // iconCount.style.color = '#666';  // 设置iconCount的样式
                    }
                });

                const iconContainer = document.createElement('div');
                iconContainer.className = 'category-icons';

                icons.forEach(icon => {
                    const card = createIconCard(icon);
                    iconContainer.appendChild(card);
                });

                details.appendChild(summary);
                details.appendChild(iconContainer);
                grid.appendChild(details);
            });

            window.addEventListener('scroll', () => {
                document.querySelectorAll('.category-header').forEach(header => {
                    const details = header.closest('details');
                    const rect = header.getBoundingClientRect();

                    if (details.open && rect.top <= 72) {
                        // header.style.position = 'fixed';
                        header.style.boxShadow = '0px 1px 2px rgba(0, 0, 0, 0.02), 0px 2px 6px rgba(0, 0, 0, 0.05), 0px 5px 14px rgba(0, 0, 0, 0.06)';
                        header.style.border = '1px solid rgba(203, 203, 203, 0.5)';
                    } else {
                        // header.style.position = 'auto';
                        header.style.boxShadow = '0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(0, 0, 0, 0)';
                        header.style.border = '1px solid rgba(203, 203, 203, 0)';
                    }
                });
                document.querySelectorAll('.icon-title').forEach(header => {
                    const rect = header.getBoundingClientRect();

                    if (rect.top <= 0) {
                        // header.style.position = 'fixed';
                        // header.style.boxShadow = '0px 1px 2px rgba(0, 0, 0, 0.02), 0px 2px 6px rgba(0, 0, 0, 0.05), 0px 5px 14px rgba(0, 0, 0, 0.06)';
                        header.style.borderBottom = '1px solid rgba(203, 203, 203, 0.5)';
                    } else {
                        // header.style.position = 'auto';
                        // header.style.boxShadow = '0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(0, 0, 0, 0)';
                        header.style.borderBottom = '1px solid rgba(203, 203, 203, 0)';
                    }
                });
            });
        }

        // 创建一个用于显示复制成功的提示元素
        function createCopyToast() {
            const toast = document.createElement('div');
            toast.className = 'copy-toast';
            toast.textContent = '已复制到剪贴板';
            document.body.appendChild(toast);
            return toast;
        }

        // 全局提示元素
        let copyToast;

        // 获取SVG内容的函数
        async function getSvgContent(iconName, mode) {
            try {
                // 从allIcons对象中获取图标数据
                const iconData = allIcons[iconName][mode];
                if (!iconData) return null;
                
                // 构建SVG内容
                let svgContent = `<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="${iconData.viewBox}" fill="none">`;
                
                // 添加所有路径
                iconData.paths.forEach(path => {
                    let pathAttrs = '';
                    for (const [key, value] of Object.entries(path)) {
                        pathAttrs += ` ${key}="${value}"`;
                    }
                    svgContent += `<path${pathAttrs}></path>`;
                });
                
                svgContent += '</svg>';
                return svgContent;
            } catch (error) {
                console.error('获取SVG内容失败:', error);
                return null;
            }
        }

        // 复制到剪贴板的函数
        async function copyToClipboard(text, element) {
            try {
                await navigator.clipboard.writeText(text);
                
                // 创建或重用提示元素
                if (!copyToast) {
                    copyToast = createCopyToast();
                }
                
                // 计算位置 - 显示在点击元素附近
                const rect = element.getBoundingClientRect();
                copyToast.style.left = `${rect.left + rect.width / 2}px`;
                copyToast.style.top = `${rect.top - 30}px`;
                
                // 显示提示
                copyToast.classList.add('visible');
                
                // 添加点击反馈效果
                element.classList.add('copied');
                
                // 设置定时器隐藏提示
                setTimeout(() => {
                    copyToast.classList.remove('visible');
                    element.classList.remove('copied');
                }, 1500);
                
                return true;
            } catch (error) {
                console.error('复制到剪贴板失败:', error);
                return false;
            }
        }

        function createIconCard(icon) {
            const card = document.createElement('div');
            card.className = 'icon-card';

            const nameDiv = document.createElement('div');
            nameDiv.className = 'icon-name';
            nameDiv.textContent = `${icon.displayName}`;

            const displayDiv = document.createElement('div');
            displayDiv.className = 'icon-display';

            ['outline', 'fill'].forEach(mode => {
                const modeContainer = document.createElement('div');
                if (icon.modes.includes(mode)) {
                    const iconElement = document.createElement('aviala-icon');
                    iconElement.setAttribute('name', icon.name);
                    iconElement.setAttribute('mode', mode);
                    
                    // 添加点击事件
                    iconElement.style.cursor = 'pointer';
                    iconElement.title = `点击复制 ${icon.name} (${mode}) SVG`;
                    iconElement.addEventListener('click', async () => {
                        const svgContent = await getSvgContent(icon.name, mode);
                        if (svgContent) {
                            copyToClipboard(svgContent, iconElement);
                        }
                    });
                    
                    modeContainer.appendChild(iconElement);
                }
                displayDiv.appendChild(modeContainer);
            });

            // 处理 colorful 及其变体
            const colorfulContainer = document.createElement('div');
            if (icon.modes.includes('colorful')) {
                const iconElement = document.createElement('aviala-icon');
                iconElement.setAttribute('name', icon.name);
                iconElement.setAttribute('mode', 'colorful');
                
                // 添加点击事件
                iconElement.style.cursor = 'pointer';
                iconElement.title = `点击复制 ${icon.name} (colorful) SVG`;
                iconElement.addEventListener('click', async () => {
                    const svgContent = await getSvgContent(icon.name, 'colorful');
                    if (svgContent) {
                        copyToClipboard(svgContent, iconElement);
                    }
                });
                
                colorfulContainer.appendChild(iconElement);
            }
            // 添加 colorful 变体到同一个容器
            const colorfulVariants = icon.modes.filter(mode => mode.startsWith('colorful-'));
            colorfulVariants.forEach(variant => {
                const variantElement = document.createElement('aviala-icon');
                variantElement.setAttribute('name', icon.name);
                variantElement.setAttribute('mode', variant);
                
                // 添加点击事件
                variantElement.style.cursor = 'pointer';
                variantElement.title = `点击复制 ${icon.name} (${variant}) SVG`;
                variantElement.addEventListener('click', async () => {
                    const svgContent = await getSvgContent(icon.name, variant);
                    if (svgContent) {
                        copyToClipboard(svgContent, variantElement);
                    }
                });
                
                colorfulContainer.appendChild(variantElement);
            });
            displayDiv.appendChild(colorfulContainer);

            // 继续展示其他模式
            ['black', 'fill-black', 'fill-colorful'].forEach(mode => {
                const modeContainer = document.createElement('div');
                if (icon.modes.includes(mode)) {
                    const iconElement = document.createElement('aviala-icon');
                    iconElement.setAttribute('name', icon.name);
                    iconElement.setAttribute('mode', mode);
                    
                    // 添加点击事件
                    iconElement.style.cursor = 'pointer';
                    iconElement.title = `点击复制 ${icon.name} (${mode}) SVG`;
                    iconElement.addEventListener('click', async () => {
                        const svgContent = await getSvgContent(icon.name, mode);
                        if (svgContent) {
                            copyToClipboard(svgContent, iconElement);
                        }
                    });
                    
                    modeContainer.appendChild(iconElement);
                }
                displayDiv.appendChild(modeContainer);
            });

            card.appendChild(nameDiv);
            card.appendChild(displayDiv);
            return card;
        } document.addEventListener('DOMContentLoaded', initializeDemo);
    </script>
</body>

</html>